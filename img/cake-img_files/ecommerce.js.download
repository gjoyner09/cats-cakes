this.Chicory=this.Chicory||{},this.Chicory.ecommerce=function(t){var e={};function n(o){if(e[o])return e[o].exports;var i=e[o]={i:o,l:!1,exports:{}};return t[o].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(o,i,function(e){return t[e]}.bind(null,i));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="https://prod-cdn.chicoryapp.com/chicory-ra-ui/",n(n.s=100)}({100:function(t,e,n){"use strict";n.r(e);var o=n(4),i=n(5),r=n(2),s=n.n(r),a=n(83),c=n.n(a),u=n(84),l=n.n(u),d=n(85),f=n.n(d),p=n(86),v=n.n(p),h=n(87),m=n.n(h),g=n(58),y=n(88),b={reserveScrollBarGap:!0},w="https://prod-cdn.chicoryapp.com/chicory-ra-ui",E=w.split("/")[0]+"//"+w.split("/")[2],S="lower-right",_="below-ingredient",O="below-recipe",j="below-post",k="custom",C="none",x={STYLED:c.a,UNSTYLED:l.a,CLEAR:f.a,THEDAILYMEAL:v.a,q12019:m.a},B=function(){function t(){Object(o.a)(this,t),this.lockBodyIOS=function(){var t={},e=null,n=s()("body");window.pageYOffset&&(e=window.pageYOffset);var o=n.css("position"),i=n.css("width"),r=n.css("overflow"),a=n.css("top");return t.savedScroll=e,t.savedPosition=o,t.savedWidth=i,t.savedOverflow=r,t.savedTop=a,n.css("overflow","hidden"),n.css("position","fixed"),n.css("top",-e+"px"),n.css("width","100vw"),t},this.unlockBodyIOS=function(t){var e=s()("body");e.css("overflow",t.savedOverflow),e.css("position",t.savedPosition),e.css("width",t.savedWidth),e.css("top",t.savedTop),window.scrollTo(0,t.savedScroll)},this.settings={},this.instances={},this.$buttons={},this.$smartcart=null}return Object(i.a)(t,[{key:"deactivate",value:function(){var t=this;Object.keys(this.instances).forEach(function(e){t.instances[e].button.remove()}),Object.keys(t.$buttons).forEach(function(e){t.$buttons[e].remove()}),t.$smartcart&&t.$smartcart.remove(),t.settings={},t.$page=null,t.$buttons={},t.$smartcart=null}},{key:"activate",value:function(t){t.recipes||(t.recipes=[{url:t.recipe.source_uri,recipe:t.recipe,selector:null}]),this.load(t).then(this.run.bind(this)).catch(s.a.done)}},{key:"load",value:function(t){var e=this;return new Promise(function(n){if(this.$page=s.a.getPageStructure(),s.a.extend(e.settings,t),!(t.host.button_template in x))throw new Error("Chicory: Settings did not specify a valid button template.");s.a.get(x[t.host.button_template],{},{},"text").then(function(o){"CLEAR"===t.host.button_template?o=o.replace("$CAPTION",t.host.button_copy):t.host.button_copy&&(o=o.replace("Get Ingredients",t.host.button_copy)),Object.keys(t.recipes).forEach(function(n){var i=null;t.buttons&&(i=t.buttons[n].selector),t.recipes[n].selector&&(i=t.recipes[n].selector),t.selector&&(i=t.selector),e.instances[t.recipes[n].url]={selector:i,button:s()(o),recipe:t.recipes[n].recipe}}),n()}).catch(s.a.done)}.bind(this))}},{key:"run",value:function(){this.injectButtons()}},{key:"injectButtons",value:function(){var t=this,e=0;return Object.keys(t.instances).forEach(function(n){if(t.instances[n].recipe)if(t.instances[n].selector){var o=document.getElementById(""+t.instances[n].selector);if(o||(o=document.querySelector(""+t.instances[n].selector)),!o)throw new Error("Chicory: Could not find selector.");o.append(t.instances[n].button.elements[0]);var i=t.getButtonEventData(t.instances[n].button.elements[0],t.instances[n].recipe);t.instances[n].button.on("click",function(e){e.preventDefault(),t.injectSmartCart(t.instances[n].recipe),s.a.send("click_button",i,t.instances[n].recipe)}),s.a.send("load_button",i,t.instances[n].recipe),e+=1}else{var r=t.instances[n].button;t.settings.recipe=t.instances[n].recipe;var a=s()("div.chicory-order-ingredients");if(a.length)Object.keys(a.elements).forEach(function(e){var n=s()(r.elements[0].cloneNode(["deep"]));n.unique_identifier=a.elements[e].dataset.unique_identifier;var o=s()(a.elements[e]),i=t.injectButton(k,n,o);t.$buttons[e]=n,i||s.a.log(new Error("Chicory: Cannot inject button. (LOCATION:".concat(t.settings.location,").")))});else{var c=r,u=t.injectButton(t.settings.location,c);t.$buttons[n]=c,u||s.a.log(new Error("Chicory: Cannot inject button. (LOCATION:".concat(t.settings.location,").")))}}}),e}},{key:"injectButton",value:function(t,e,n){switch(t){case S:var o=this.$page.preps;if(!o.length)return this.injectButton(_,e);this.$button.css("float","right"),this.$button.css("margin-right","5px"),o.prepend(e);break;case _:var i=this.$page.ingredients;if(!i.length)return this.injectButton(O,e);i.append(e);break;case O:var r=this.$page.recipe;if(!r.length)return this.injectButton(j,e);r.append(e);break;case j:var a=this.$page.post;if(!a.length)return this.injectButton(C,e);a.append(e);break;case k:if(!n)return this.injectButton(C,e);n.append(e);break;case C:return;default:return this.injectButton(_,e)}var c=this.getButtonEventData(e,this.settings.recipe),u=Object(y.v4)();c.funnel_id=u,e.on("view",function(t){s.a.send("view_button",c)});var l=e.unique_identifier;return e.on("click",function(t){t.preventDefault(),window.Chicory&&window.Chicory.analytics&&window.Chicory.analytics.default.setFunnel(c.funnel_id),this.injectSmartCart(this.settings.recipe,l),s.a.send("click_button",c)}.bind(this)),s.a.send("load_button",c),console.log("Chicory: injecting button at location: "+t),t}},{key:"getButtonEventData",value:function(t,e){return{unique_identifier:t.unique_identifier,parser_version:e.parser_version,button_visible:null!==t.offsetParent,is_published_v1:e.is_published_v1,is_published_v2:e.is_published_v2,zip_code:this.settings.zip_code}}},{key:"injectSmartCart",value:function(t,e){var n=this.$smartcart=s()('<div style="overflow: auto!important; -webkit-overflow-scrolling: touch!important; z-index: 2147483647 !important; position: fixed !important; top: 0 !important; bottom: 0 !important; left: 0 !important; right: 0 !important;"></div>'),o=s()("meta[name='viewport']");o.length||(o=s()('<meta name="viewport">'),s()("head").append(o));var i=o.attr("content");o.attr("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0");var r=document.createElement("template");r.innerHTML='<iframe style="margin: 0; position: absolute; top: 0; left: 0; width: 100%; height: 100%;" id="chicory-smartcart" name="chicory-smartcart" src="https://prod-cdn.chicoryapp.com/chicory-ra-ui/index.html" frameborder="0" height="100%" width="100%" data-settings="'+JSON.stringify(this.settings)+'" allowfullscreen allow="geolocation">';var a=r.content.firstChild;document.body.appendChild(a),s()("body").append(n),n.append(s()(a));var c=s()("html"),u=c.css("overflow");window.postMessage("chicory-modal-open");var l=null;this.isIosSaffari()?l=this.lockBodyIOS():(Object(g.disableBodyScroll)(a,b),c&&setTimeout(function(){c.css("overflow","hidden")},0)),this.wait(a,"chicory.cart.init").then(function(){this.send(a,"load",{settings:s.a.extend({recipe:t},this.settings,{unique_identifier:e})})}.bind(this)).catch(s.a.done),window.addEventListener("message",function(t){var e=new RegExp(E.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"g");if(t.origin.match(e)&&t.source===a.contentWindow){var n=JSON.parse(t.data);if("chicory.cart.event"===n.method){if("close_cart"===n.name)if(document.getElementById("chicory-smartcart").parentNode.remove(),o.attr("content",i),window.postMessage("chicory-modal-close"),this.isIosSaffari())this.unlockBodyIOS(l);else{Object(g.enableBodyScroll)(a);var r=s()("html");r&&setTimeout(function(){r.css("overflow",u)},0)}s.a.send(n.name,n.data)}}}.bind(this),!1)}},{key:"isIosSaffari",value:function(){var t=document.createElement("div");return document.documentElement.appendChild(t),t.style.WebkitOverflowScrolling="touch","getComputedStyle"in window&&"touch"===window.getComputedStyle(t)["-webkit-overflow-scrolling"]}},{key:"send",value:function(t,e,n){return new Promise(function(o){this.wait(t,e).then(function(t){o(t)}).catch(s.a.done),t.contentWindow.postMessage({method:e,args:n},E)}.bind(this))}},{key:"wait",value:function(t,e){return new Promise(function(n){window.addEventListener("message",function o(i){var r=new RegExp(E.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1"),"g");if(i.origin.match(r)&&i.source===t.contentWindow){var s=JSON.parse(i.data);s.method===e&&(window.removeEventListener("message",o),n(s.resp))}},!1)})}}]),t}();e.default=new B},103:function(t,e,n){var o,i,r=n(60),s=n(61),a=0,c=0;t.exports=function(t,e,n){var u=e&&n||0,l=e||[],d=(t=t||{}).node||o,f=void 0!==t.clockseq?t.clockseq:i;if(null==d||null==f){var p=r();null==d&&(d=o=[1|p[0],p[1],p[2],p[3],p[4],p[5]]),null==f&&(f=i=16383&(p[6]<<8|p[7]))}var v=void 0!==t.msecs?t.msecs:(new Date).getTime(),h=void 0!==t.nsecs?t.nsecs:c+1,m=v-a+(h-c)/1e4;if(m<0&&void 0===t.clockseq&&(f=f+1&16383),(m<0||v>a)&&void 0===t.nsecs&&(h=0),h>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");a=v,c=h,i=f;var g=(1e4*(268435455&(v+=122192928e5))+h)%4294967296;l[u++]=g>>>24&255,l[u++]=g>>>16&255,l[u++]=g>>>8&255,l[u++]=255&g;var y=v/4294967296*1e4&268435455;l[u++]=y>>>8&255,l[u++]=255&y,l[u++]=y>>>24&15|16,l[u++]=y>>>16&255,l[u++]=f>>>8|128,l[u++]=255&f;for(var b=0;b<6;++b)l[u+b]=d[b];return e||s(l)}},104:function(t,e,n){var o=n(60),i=n(61);t.exports=function(t,e,n){var r=e&&n||0;"string"==typeof t&&(e="binary"===t?new Array(16):null,t=null);var s=(t=t||{}).random||(t.rng||o)();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,e)for(var a=0;a<16;++a)e[r+a]=s[a];return e||i(s)}},2:function(t,e){!function(){t.exports=this.dom}()},4:function(t,e,n){"use strict";function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}n.d(e,"a",function(){return o})},5:function(t,e,n){"use strict";function o(t,e){for(var n=0;n<e.length;n++){var o=e[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,o.key,o)}}function i(t,e,n){return e&&o(t.prototype,e),n&&o(t,n),t}n.d(e,"a",function(){return i})},58:function(t,e,n){var o,i,r;i=[e],void 0===(r="function"===typeof(o=function(t){"use strict";function e(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}Object.defineProperty(t,"__esModule",{value:!0});var n=!1;if("undefined"!=typeof window){var o={get passive(){n=!0}};window.addEventListener("testPassive",null,o),window.removeEventListener("testPassive",null,o)}var i="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform),r=[],s=!1,a=-1,c=void 0,u=void 0,l=function(t){return r.some(function(e){return!(!e.options.allowTouchMove||!e.options.allowTouchMove(t))})},d=function(t){var e=t||window.event;return!!l(e.target)||1<e.touches.length||(e.preventDefault&&e.preventDefault(),!1)},f=function(){setTimeout(function(){void 0!==u&&(document.body.style.paddingRight=u,u=void 0),void 0!==c&&(document.body.style.overflow=c,c=void 0)})};t.disableBodyScroll=function(t,o){if(i){if(!t)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(t&&!r.some(function(e){return e.targetElement===t})){var f={targetElement:t,options:o||{}};r=[].concat(e(r),[f]),t.ontouchstart=function(t){1===t.targetTouches.length&&(a=t.targetTouches[0].clientY)},t.ontouchmove=function(e){var n,o,i,r;1===e.targetTouches.length&&(o=t,r=(n=e).targetTouches[0].clientY-a,!l(n.target)&&(o&&0===o.scrollTop&&0<r?d(n):(i=o)&&i.scrollHeight-i.scrollTop<=i.clientHeight&&r<0?d(n):n.stopPropagation()))},s||(document.addEventListener("touchmove",d,n?{passive:!1}:void 0),s=!0)}}else{v=o,setTimeout(function(){if(void 0===u){var t=!!v&&!0===v.reserveScrollBarGap,e=window.innerWidth-document.documentElement.clientWidth;t&&0<e&&(u=document.body.style.paddingRight,document.body.style.paddingRight=e+"px")}void 0===c&&(c=document.body.style.overflow,document.body.style.overflow="hidden")});var p={targetElement:t,options:o||{}};r=[].concat(e(r),[p])}var v},t.clearAllBodyScrollLocks=function(){i?(r.forEach(function(t){t.targetElement.ontouchstart=null,t.targetElement.ontouchmove=null}),s&&(document.removeEventListener("touchmove",d,n?{passive:!1}:void 0),s=!1),r=[],a=-1):(f(),r=[])},t.enableBodyScroll=function(t){if(i){if(!t)return void console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");t.ontouchstart=null,t.ontouchmove=null,r=r.filter(function(e){return e.targetElement!==t}),s&&0===r.length&&(document.removeEventListener("touchmove",d,n?{passive:!1}:void 0),s=!1)}else 1===r.length&&r[0].targetElement===t?(f(),r=[]):r=r.filter(function(e){return e.targetElement!==t})}})?o.apply(e,i):o)||(t.exports=r)},60:function(t,e){var n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof window.msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto);if(n){var o=new Uint8Array(16);t.exports=function(){return n(o),o}}else{var i=new Array(16);t.exports=function(){for(var t,e=0;e<16;e++)0===(3&e)&&(t=4294967296*Math.random()),i[e]=t>>>((3&e)<<3)&255;return i}}},61:function(t,e){for(var n=[],o=0;o<256;++o)n[o]=(o+256).toString(16).substr(1);t.exports=function(t,e){var o=e||0,i=n;return[i[t[o++]],i[t[o++]],i[t[o++]],i[t[o++]],"-",i[t[o++]],i[t[o++]],"-",i[t[o++]],i[t[o++]],"-",i[t[o++]],i[t[o++]],"-",i[t[o++]],i[t[o++]],i[t[o++]],i[t[o++]],i[t[o++]],i[t[o++]]].join("")}},83:function(t,e,n){t.exports=n.p+"static/media/button-styled.7d946050.button"},84:function(t,e,n){t.exports=n.p+"static/media/button-unstyled.4ad8a8ad.button"},85:function(t,e,n){t.exports=n.p+"static/media/button-clear.2be9ec9c.button"},86:function(t,e,n){t.exports=n.p+"static/media/button-thedailymeal.827b06f5.button"},87:function(t,e,n){t.exports=n.p+"static/media/button-q12019.5b7aa5eb.button"},88:function(t,e,n){var o=n(103),i=n(104),r=i;r.v1=o,r.v4=i,t.exports=r}});
//# sourceMappingURL=ecommerce.cbb18f5e.js.map